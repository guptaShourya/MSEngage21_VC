{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/shouryagupta/Desktop/MS Engage 21/MSEngage21_VC/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar _asyncToGenerator = require(\"/Users/shouryagupta/Desktop/MS Engage 21/MSEngage21_VC/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nvar _classCallCheck = require(\"/Users/shouryagupta/Desktop/MS Engage 21/MSEngage21_VC/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/shouryagupta/Desktop/MS Engage 21/MSEngage21_VC/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.McsMedia = exports.Media = exports.McsClient = exports.Client = void 0;\n\nvar logger_1 = require(\"./logger\");\n\nvar configuration_1 = require(\"./configuration\");\n\nvar media_1 = require(\"./media\");\n\nObject.defineProperty(exports, \"Media\", {\n  enumerable: true,\n  get: function get() {\n    return media_1.Media;\n  }\n});\nObject.defineProperty(exports, \"McsMedia\", {\n  enumerable: true,\n  get: function get() {\n    return media_1.Media;\n  }\n});\n\nvar transport_1 = require(\"./services/transport\");\n\nvar network_1 = require(\"./services/network\");\n\nvar log = logger_1.Logger.scope(''); //log.setLevel('trace');\n\nvar SDK_VERSION = require('./../package.json').version;\n\nvar MSG_NO_TOKEN = 'A valid Twilio token should be provided';\n/**\n * @classdesc A Client provides an interface for Media Content Service\n */\n\nvar Client = /*#__PURE__*/function () {\n  /**\n   * @param {String} token - Access token\n   * @param {String} baseUrl - Base URL for Media Content Service, i.e. /v1/Services/{serviceSid}/Media\n   * @param {Client#ClientOptions} [options] - Options to customize the Client\n   */\n  function Client(token, baseUrl) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    _classCallCheck(this, Client);\n\n    this.options = options;\n    this.options.logLevel = this.options.logLevel || 'silent';\n    this.config = new configuration_1.Configuration(token, baseUrl, this.options);\n\n    if (!token) {\n      throw new Error(MSG_NO_TOKEN);\n    }\n\n    log.setLevel(this.options.logLevel);\n    this.options.transport = this.options.transport || new transport_1.Transport();\n    this.transport = this.options.transport;\n    this.network = new network_1.Network(this.config, this.transport);\n  }\n  /**\n   * These options can be passed to Client constructor\n   * @typedef {Object} Client#ClientOptions\n   * @property {String} [logLevel='error'] - The level of logging to enable. Valid options\n   *   (from strictest to broadest): ['silent', 'error', 'warn', 'info', 'debug', 'trace']\n   */\n\n  /**\n   * Update the token used for Client operations\n   * @param {String} token - The JWT string of the new token\n   * @public\n   * @returns {void}\n   */\n\n\n  _createClass(Client, [{\n    key: \"updateToken\",\n    value: function updateToken(token) {\n      log.info('updateToken');\n\n      if (!token) {\n        throw new Error(MSG_NO_TOKEN);\n      }\n\n      this.config.updateToken(token);\n    }\n    /**\n     * Gets media from media service\n     * @param {String} sid - Media's SID\n     * @public\n     * @returns {Promise<Media>}\n     */\n\n  }, {\n    key: \"get\",\n    value: function () {\n      var _get = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(sid) {\n        var response;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.network.get(\"\".concat(this.config.baseUrl, \"/\").concat(sid));\n\n              case 2:\n                response = _context.sent;\n                return _context.abrupt(\"return\", new media_1.Media(this.config, this.network, response.body));\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function get(_x) {\n        return _get.apply(this, arguments);\n      }\n\n      return get;\n    }()\n    /**\n     * Posts raw content to media service\n     * @param {String} contentType - content type of media\n     * @param {String|Buffer|Blob} media - content to post\n     * @public\n     * @returns {Promise<Media>}\n     */\n\n  }, {\n    key: \"post\",\n    value: function () {\n      var _post = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(contentType, media) {\n        var response;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.network.post(this.config.baseUrl, media, contentType);\n\n              case 2:\n                response = _context2.sent;\n                return _context2.abrupt(\"return\", new media_1.Media(this.config, this.network, response.body));\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function post(_x2, _x3) {\n        return _post.apply(this, arguments);\n      }\n\n      return post;\n    }()\n    /**\n     * Posts FormData to media service. Can be used only with browser engine's FormData.\n     * In non-browser FormData case the method will do promise reject with\n     * new TypeError(\"Posting FormData supported only with browser engine's FormData\")\n     * @param {FormData} formData - form data to post\n     * @public\n     * @returns {Promise<Media>}\n     */\n\n  }, {\n    key: \"postFormData\",\n    value: function () {\n      var _postFormData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(formData) {\n        var response;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.network.post(this.config.baseUrl, formData);\n\n              case 2:\n                response = _context3.sent;\n                return _context3.abrupt(\"return\", new media_1.Media(this.config, this.network, response.body));\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function postFormData(_x4) {\n        return _postFormData.apply(this, arguments);\n      }\n\n      return postFormData;\n    }()\n    /**\n     * Retrieve information about multiple media SIDs at the same time.\n     * @param mediaSids Array of Media SIDs to get information from.\n     */\n\n  }, {\n    key: \"mediaSetGet\",\n    value: function () {\n      var _mediaSetGet = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(mediaSids) {\n        var _this = this;\n\n        var query, response;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                query = {\n                  command: 'get',\n                  list: mediaSids.map(function (sid) {\n                    return {\n                      'media_sid': sid\n                    };\n                  })\n                };\n                _context4.next = 3;\n                return this.network.post(\"\".concat(this.config.baseUrl, \"Set\"), JSON.stringify(query), 'application/json');\n\n              case 3:\n                response = _context4.sent;\n                return _context4.abrupt(\"return\", response.map(function (item) {\n                  if (item.code !== 200) {\n                    throw new Error(\"Failed to obtain detailed information about Media items (failed SID \".concat(item.media_record.sid, \")\"));\n                  }\n\n                  return new media_1.Media(_this.config, _this.network, item.media_record);\n                }));\n\n              case 5:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function mediaSetGet(_x5) {\n        return _mediaSetGet.apply(this, arguments);\n      }\n\n      return mediaSetGet;\n    }()\n  }]);\n\n  return Client;\n}();\n\nexports.Client = Client;\nexports.McsClient = Client;\nClient.version = SDK_VERSION;\nexports.default = Client;","map":{"version":3,"sources":["/Users/shouryagupta/Desktop/MS Engage 21/MSEngage21_VC/node_modules/twilio-chat/node_modules/twilio-mcs-client/lib/client.js"],"names":["Object","defineProperty","exports","value","McsMedia","Media","McsClient","Client","logger_1","require","configuration_1","media_1","enumerable","get","transport_1","network_1","log","Logger","scope","SDK_VERSION","version","MSG_NO_TOKEN","token","baseUrl","options","logLevel","config","Configuration","Error","setLevel","transport","Transport","network","Network","info","updateToken","sid","response","body","contentType","media","post","formData","mediaSids","query","command","list","map","JSON","stringify","item","code","media_record","default"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.McsMedia = exports.Media = exports.McsClient = exports.Client = void 0;\nconst logger_1 = require(\"./logger\");\nconst configuration_1 = require(\"./configuration\");\nconst media_1 = require(\"./media\");\nObject.defineProperty(exports, \"Media\", { enumerable: true, get: function () { return media_1.Media; } });\nObject.defineProperty(exports, \"McsMedia\", { enumerable: true, get: function () { return media_1.Media; } });\nconst transport_1 = require(\"./services/transport\");\nconst network_1 = require(\"./services/network\");\nconst log = logger_1.Logger.scope('');\n//log.setLevel('trace');\nconst SDK_VERSION = require('./../package.json').version;\nconst MSG_NO_TOKEN = 'A valid Twilio token should be provided';\n/**\n * @classdesc A Client provides an interface for Media Content Service\n */\nclass Client {\n    /**\n     * @param {String} token - Access token\n     * @param {String} baseUrl - Base URL for Media Content Service, i.e. /v1/Services/{serviceSid}/Media\n     * @param {Client#ClientOptions} [options] - Options to customize the Client\n     */\n    constructor(token, baseUrl, options = {}) {\n        this.options = options;\n        this.options.logLevel = this.options.logLevel || 'silent';\n        this.config = new configuration_1.Configuration(token, baseUrl, this.options);\n        if (!token) {\n            throw new Error(MSG_NO_TOKEN);\n        }\n        log.setLevel(this.options.logLevel);\n        this.options.transport = this.options.transport || new transport_1.Transport();\n        this.transport = this.options.transport;\n        this.network = new network_1.Network(this.config, this.transport);\n    }\n    /**\n     * These options can be passed to Client constructor\n     * @typedef {Object} Client#ClientOptions\n     * @property {String} [logLevel='error'] - The level of logging to enable. Valid options\n     *   (from strictest to broadest): ['silent', 'error', 'warn', 'info', 'debug', 'trace']\n     */\n    /**\n     * Update the token used for Client operations\n     * @param {String} token - The JWT string of the new token\n     * @public\n     * @returns {void}\n     */\n    updateToken(token) {\n        log.info('updateToken');\n        if (!token) {\n            throw new Error(MSG_NO_TOKEN);\n        }\n        this.config.updateToken(token);\n    }\n    /**\n     * Gets media from media service\n     * @param {String} sid - Media's SID\n     * @public\n     * @returns {Promise<Media>}\n     */\n    async get(sid) {\n        const response = await this.network.get(`${this.config.baseUrl}/${sid}`);\n        return new media_1.Media(this.config, this.network, response.body);\n    }\n    /**\n     * Posts raw content to media service\n     * @param {String} contentType - content type of media\n     * @param {String|Buffer|Blob} media - content to post\n     * @public\n     * @returns {Promise<Media>}\n     */\n    async post(contentType, media) {\n        const response = await this.network.post(this.config.baseUrl, media, contentType);\n        return new media_1.Media(this.config, this.network, response.body);\n    }\n    /**\n     * Posts FormData to media service. Can be used only with browser engine's FormData.\n     * In non-browser FormData case the method will do promise reject with\n     * new TypeError(\"Posting FormData supported only with browser engine's FormData\")\n     * @param {FormData} formData - form data to post\n     * @public\n     * @returns {Promise<Media>}\n     */\n    async postFormData(formData) {\n        const response = await this.network.post(this.config.baseUrl, formData);\n        return new media_1.Media(this.config, this.network, response.body);\n    }\n    /**\n     * Retrieve information about multiple media SIDs at the same time.\n     * @param mediaSids Array of Media SIDs to get information from.\n     */\n    async mediaSetGet(mediaSids) {\n        const query = {\n            command: 'get',\n            list: mediaSids.map((sid) => ({ 'media_sid': sid }))\n        };\n        const response = (await this.network.post(`${this.config.baseUrl}Set`, JSON.stringify(query), 'application/json'));\n        return response.map((item) => {\n            if (item.code !== 200) {\n                throw new Error(`Failed to obtain detailed information about Media items (failed SID ${item.media_record.sid})`);\n            }\n            return new media_1.Media(this.config, this.network, item.media_record);\n        });\n    }\n}\nexports.Client = Client;\nexports.McsClient = Client;\nClient.version = SDK_VERSION;\nexports.default = Client;\n"]},"metadata":{},"sourceType":"script"}