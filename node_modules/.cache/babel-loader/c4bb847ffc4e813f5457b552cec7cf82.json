{"ast":null,"code":"/* globals chrome, navigator */\n'use strict';\n\nfunction _toArray(arr) {\n  return Array.isArray(arr) ? arr : Array.from(arr);\n}\n\nvar _require = require('@twilio/webrtc/lib/util'),\n    guessBrowser = _require.guessBrowser,\n    isWebRTCSupported = _require.support;\n\nvar SUPPORTED_CHROME_BASED_BROWSERS = ['edg', 'edge', 'electron', 'headlesschrome'];\nvar SUPPORTED_ANDROID_BROWSERS = ['chrome', 'firefox'];\nvar SUPPORTED_IOS_BROWSERS = ['safari']; // Currently none. Add 'brave', 'edg', and 'edge' here once we start supporting them\n\nvar SUPPORTED_MOBILE_WEBKIT_BASED_BROWSERS = [];\n/**\n * Get the top level parenthesized substrings within a given string. Unmatched\n * parentheses are ignored.\n * Ex: \"abc) (def) gh(ij) (kl (mn)o) (pqr\" => [\"(def)\", \"(ij)\", \"(kl (mn)o)\"]\n * @param {string} string\n * @returns {string[]}\n */\n\nfunction getParenthesizedSubstrings(string) {\n  var openParenthesisPositions = [];\n  var substrings = [];\n\n  for (var i = 0; i < string.length; i++) {\n    if (string[i] === '(') {\n      openParenthesisPositions.push(i);\n    } else if (string[i] === ')' && openParenthesisPositions.length > 0) {\n      var openParenthesisPosition = openParenthesisPositions.pop();\n\n      if (openParenthesisPositions.length === 0) {\n        substrings.push(string.substring(openParenthesisPosition, i + 1));\n      }\n    }\n  }\n\n  return substrings;\n}\n/**\n * Check whether the current browser is a mobile browser\n * @param {string} userAgent\n * @returns {boolean}\n */\n\n\nfunction isMobile(userAgent) {\n  userAgent = userAgent || navigator.userAgent;\n  return /Mobi/.test(userAgent);\n}\n/**\n * Check whether the current browser is non-Chromium Edge.\n * @param {string} browser\n * @returns {boolean}\n */\n\n\nfunction isNonChromiumEdge(browser) {\n  return browser === 'chrome' && /Edge/.test(navigator.userAgent) && (typeof chrome === 'undefined' || typeof chrome.runtime === 'undefined');\n}\n/**\n * Get the name of the rebranded Chromium browser, if any. Re-branded Chrome's user\n * agent has the following format:\n * <source>/<version> (<os>) <engine>/<version> (<engine_name>) Chrome/<version> [Mobile] Safari/<version>\n * @param browser\n * @returns {?string} Name of the rebranded Chrome browser, or null if the browser\n *   is either not Chrome or vanilla Chrome.\n */\n\n\nfunction rebrandedChromeBrowser(browser) {\n  // If the browser is not Chrome based, then it is not a rebranded Chrome browser.\n  if (browser !== 'chrome') {\n    return null;\n  } // Latest desktop Brave browser has a \"brave\" property in navigator.\n\n\n  if ('brave' in navigator) {\n    return 'brave';\n  } // Remove the \"(.+)\" entries from the user agent thereby retaining only the\n  // <name>[/<version>] entries.\n\n\n  var parenthesizedSubstrings = getParenthesizedSubstrings(navigator.userAgent);\n  var nameAndVersions = parenthesizedSubstrings.reduce(function (userAgent, substring) {\n    return userAgent.replace(substring, '');\n  }, navigator.userAgent); // Extract the potential browser <name>s by ignoring the first two names, which\n  // point to <source> and <engine>.\n\n  var matches = nameAndVersions.match(/[^\\s]+/g) || [];\n\n  var _matches$map = matches.map(function (nameAndVersion) {\n    return nameAndVersion.split('/')[0].toLowerCase();\n  }),\n      _matches$map2 = _toArray(_matches$map),\n      browserNames = _matches$map2.slice(2); // Extract the <name> that is not expected to be present in the vanilla Chrome\n  // browser, which indicates the rebranded name (ex: \"edg[e]\", \"electron\"). If null,\n  // then this is a vanilla Chrome browser.\n\n\n  return browserNames.find(function (name) {\n    return !['chrome', 'mobile', 'safari'].includes(name);\n  }) || null;\n}\n/**\n * Get the name of the mobile webkit based browser, if any.\n * @param browser\n * @returns {?string} Name of the mobile webkit based browser, or null if the browser\n *   is either not webkit based or mobile safari.\n */\n\n\nfunction mobileWebKitBrowser(browser) {\n  if (browser !== 'safari') {\n    return null;\n  }\n\n  if ('brave' in navigator) {\n    return 'brave';\n  }\n\n  return ['edge', 'edg'].find(function (name) {\n    return navigator.userAgent.toLowerCase().includes(name);\n  }) || null;\n}\n/**\n * Check if the current browser is officially supported by twilio-video.js.\n * @returns {boolean}\n */\n\n\nfunction isSupported() {\n  var browser = guessBrowser();\n  var rebrandedChrome = rebrandedChromeBrowser(browser);\n  var mobileWebKit = mobileWebKitBrowser(browser);\n  var supportedMobileBrowsers = /android/.test(navigator.userAgent.toLowerCase()) ? SUPPORTED_ANDROID_BROWSERS : SUPPORTED_IOS_BROWSERS;\n  return !!browser && isWebRTCSupported() && (!rebrandedChrome || SUPPORTED_CHROME_BASED_BROWSERS.includes(rebrandedChrome)) && !isNonChromiumEdge(browser) && (!mobileWebKit || SUPPORTED_MOBILE_WEBKIT_BASED_BROWSERS.includes(mobileWebKit)) && (!isMobile() || supportedMobileBrowsers.includes(browser));\n}\n\nmodule.exports = isSupported;","map":{"version":3,"sources":["/Users/shouryagupta/Desktop/MS Engage 21/MSEngage21_VC/node_modules/twilio-video/es5/util/support.js"],"names":["_toArray","arr","Array","isArray","from","_require","require","guessBrowser","isWebRTCSupported","support","SUPPORTED_CHROME_BASED_BROWSERS","SUPPORTED_ANDROID_BROWSERS","SUPPORTED_IOS_BROWSERS","SUPPORTED_MOBILE_WEBKIT_BASED_BROWSERS","getParenthesizedSubstrings","string","openParenthesisPositions","substrings","i","length","push","openParenthesisPosition","pop","substring","isMobile","userAgent","navigator","test","isNonChromiumEdge","browser","chrome","runtime","rebrandedChromeBrowser","parenthesizedSubstrings","nameAndVersions","reduce","replace","matches","match","_matches$map","map","nameAndVersion","split","toLowerCase","_matches$map2","browserNames","slice","find","name","includes","mobileWebKitBrowser","isSupported","rebrandedChrome","mobileWebKit","supportedMobileBrowsers","module","exports"],"mappings":"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","sourcesContent":["/* globals chrome, navigator */\n'use strict';\n\nfunction _toArray(arr) { return Array.isArray(arr) ? arr : Array.from(arr); }\n\nvar _require = require('@twilio/webrtc/lib/util'),\n    guessBrowser = _require.guessBrowser,\n    isWebRTCSupported = _require.support;\n\nvar SUPPORTED_CHROME_BASED_BROWSERS = ['edg', 'edge', 'electron', 'headlesschrome'];\nvar SUPPORTED_ANDROID_BROWSERS = ['chrome', 'firefox'];\nvar SUPPORTED_IOS_BROWSERS = ['safari'];\n// Currently none. Add 'brave', 'edg', and 'edge' here once we start supporting them\nvar SUPPORTED_MOBILE_WEBKIT_BASED_BROWSERS = [];\n\n/**\n * Get the top level parenthesized substrings within a given string. Unmatched\n * parentheses are ignored.\n * Ex: \"abc) (def) gh(ij) (kl (mn)o) (pqr\" => [\"(def)\", \"(ij)\", \"(kl (mn)o)\"]\n * @param {string} string\n * @returns {string[]}\n */\nfunction getParenthesizedSubstrings(string) {\n  var openParenthesisPositions = [];\n  var substrings = [];\n  for (var i = 0; i < string.length; i++) {\n    if (string[i] === '(') {\n      openParenthesisPositions.push(i);\n    } else if (string[i] === ')' && openParenthesisPositions.length > 0) {\n      var openParenthesisPosition = openParenthesisPositions.pop();\n      if (openParenthesisPositions.length === 0) {\n        substrings.push(string.substring(openParenthesisPosition, i + 1));\n      }\n    }\n  }\n  return substrings;\n}\n\n/**\n * Check whether the current browser is a mobile browser\n * @param {string} userAgent\n * @returns {boolean}\n */\nfunction isMobile(userAgent) {\n  userAgent = userAgent || navigator.userAgent;\n  return (/Mobi/.test(userAgent)\n  );\n}\n\n/**\n * Check whether the current browser is non-Chromium Edge.\n * @param {string} browser\n * @returns {boolean}\n */\nfunction isNonChromiumEdge(browser) {\n  return browser === 'chrome' && /Edge/.test(navigator.userAgent) && (typeof chrome === 'undefined' || typeof chrome.runtime === 'undefined');\n}\n\n/**\n * Get the name of the rebranded Chromium browser, if any. Re-branded Chrome's user\n * agent has the following format:\n * <source>/<version> (<os>) <engine>/<version> (<engine_name>) Chrome/<version> [Mobile] Safari/<version>\n * @param browser\n * @returns {?string} Name of the rebranded Chrome browser, or null if the browser\n *   is either not Chrome or vanilla Chrome.\n */\nfunction rebrandedChromeBrowser(browser) {\n  // If the browser is not Chrome based, then it is not a rebranded Chrome browser.\n  if (browser !== 'chrome') {\n    return null;\n  }\n\n  // Latest desktop Brave browser has a \"brave\" property in navigator.\n  if ('brave' in navigator) {\n    return 'brave';\n  }\n\n  // Remove the \"(.+)\" entries from the user agent thereby retaining only the\n  // <name>[/<version>] entries.\n  var parenthesizedSubstrings = getParenthesizedSubstrings(navigator.userAgent);\n  var nameAndVersions = parenthesizedSubstrings.reduce(function (userAgent, substring) {\n    return userAgent.replace(substring, '');\n  }, navigator.userAgent);\n\n  // Extract the potential browser <name>s by ignoring the first two names, which\n  // point to <source> and <engine>.\n  var matches = nameAndVersions.match(/[^\\s]+/g) || [];\n\n  var _matches$map = matches.map(function (nameAndVersion) {\n    return nameAndVersion.split('/')[0].toLowerCase();\n  }),\n      _matches$map2 = _toArray(_matches$map),\n      browserNames = _matches$map2.slice(2);\n\n  // Extract the <name> that is not expected to be present in the vanilla Chrome\n  // browser, which indicates the rebranded name (ex: \"edg[e]\", \"electron\"). If null,\n  // then this is a vanilla Chrome browser.\n\n\n  return browserNames.find(function (name) {\n    return !['chrome', 'mobile', 'safari'].includes(name);\n  }) || null;\n}\n\n/**\n * Get the name of the mobile webkit based browser, if any.\n * @param browser\n * @returns {?string} Name of the mobile webkit based browser, or null if the browser\n *   is either not webkit based or mobile safari.\n */\nfunction mobileWebKitBrowser(browser) {\n  if (browser !== 'safari') {\n    return null;\n  }\n  if ('brave' in navigator) {\n    return 'brave';\n  }\n\n  return ['edge', 'edg'].find(function (name) {\n    return navigator.userAgent.toLowerCase().includes(name);\n  }) || null;\n}\n\n/**\n * Check if the current browser is officially supported by twilio-video.js.\n * @returns {boolean}\n */\nfunction isSupported() {\n  var browser = guessBrowser();\n  var rebrandedChrome = rebrandedChromeBrowser(browser);\n  var mobileWebKit = mobileWebKitBrowser(browser);\n  var supportedMobileBrowsers = /android/.test(navigator.userAgent.toLowerCase()) ? SUPPORTED_ANDROID_BROWSERS : SUPPORTED_IOS_BROWSERS;\n\n  return !!browser && isWebRTCSupported() && (!rebrandedChrome || SUPPORTED_CHROME_BASED_BROWSERS.includes(rebrandedChrome)) && !isNonChromiumEdge(browser) && (!mobileWebKit || SUPPORTED_MOBILE_WEBKIT_BASED_BROWSERS.includes(mobileWebKit)) && (!isMobile() || supportedMobileBrowsers.includes(browser));\n}\n\nmodule.exports = isSupported;"]},"metadata":{},"sourceType":"script"}